{"ast":null,"code":"var _jsxFileName = \"/Users/chienyoushan/Desktop/33/myapp/src/pages/SearchDetail/index.js\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport { useState, useEffect, useLayoutEffect } from \"react\";\nimport Carousel from \"../../components/Common/Carousel\";\nimport { requesScenicSpot, requesActivity, requesRestaurant } from \"../../controller/apiManager\";\nimport { useParams } from \"react-router-dom\";\nimport DetailInfo from \"./common/DetailInfo\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nasync function fetchScenicSpotData(setDetailData) {\n  //載入頁面取後端資料\n  const getdata = await requesScenicSpot('', {\n    $top: 4,\n    $format: 'JSON'\n  });\n  setDetailData(getdata);\n}\n\nasync function fetchRestaurantData(setDetailData) {\n  //載入頁面取後端資料\n  const getdata = await requesRestaurant('', {\n    $filter: \"Picture/PictureUrl1 ne null\",\n    $top: 4,\n    $format: 'JSON'\n  });\n  setDetailData(getdata);\n} // async function fetchActivityData(setDetailData, id){ //載入頁面取後端資料\n//     console.log('33');\n//     const getdata = await requesActivity('', {\n//         $filter: `ActivityID eq '`+id+`'`,\n//         $format: 'JSON'\n//     });\n//     setDetailData(getdata);\n// }\n\n\nconst SearchDetail = () => {\n  _s();\n\n  const {\n    itemId,\n    itemType\n  } = useParams();\n  const [searchDetailData, setDetailData] = useState([]);\n  const [isLoading, setLoading] = useState(false);\n  console.log(itemType);\n  useLayoutEffect(() => {\n    setLoading(true);\n\n    const fetchActivityData = async () => {\n      const data = await Promise.all([requesActivity('', {\n        $filter: `ActivityID eq '` + itemId + `'`,\n        $format: 'JSON'\n      })]);\n      console.log('data', data);\n      setDetailData(data);\n    };\n\n    fetchActivityData();\n    setLoading(false);\n    console.log('222'); // fetchActivityData(setDetailData, itemId);\n    // console.log('77');\n    // if(itemType == 'ActivityID'){\n    //     console.log('222');\n    //     fetchActivityData(setDetailData, itemId);\n    // }\n    // if(itemType === 'ScenicSpotID'){\n    //     fetchScenicSpotData(setDetailData, itemId);\n    // }\n    // if(itemType === 'RestaurantID'){\n    //     fetchRestaurantData(setDetailData, itemId);\n    // }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [console.log('render'), /*#__PURE__*/_jsxDEV(Carousel, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(DetailInfo, {\n      data: searchDetailData,\n      itemType: itemType\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 7\n  }, this);\n};\n\n_s(SearchDetail, \"yGXnsqtcTZ0u6hETgP7TbYmnkiY=\", false, function () {\n  return [useParams];\n});\n\n_c = SearchDetail;\nexport default SearchDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchDetail\");","map":{"version":3,"sources":["/Users/chienyoushan/Desktop/33/myapp/src/pages/SearchDetail/index.js"],"names":["React","useState","useEffect","useLayoutEffect","Carousel","requesScenicSpot","requesActivity","requesRestaurant","useParams","DetailInfo","fetchScenicSpotData","setDetailData","getdata","$top","$format","fetchRestaurantData","$filter","SearchDetail","itemId","itemType","searchDetailData","isLoading","setLoading","console","log","fetchActivityData","data","Promise","all"],"mappings":";;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,eAA9B,QAAqD,OAArD;AACA,OAAOC,QAAP,MAAqB,kCAArB;AACA,SAASC,gBAAT,EAA2BC,cAA3B,EAA2CC,gBAA3C,QAAmE,6BAAnE;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,OAAOC,UAAP,MAAuB,qBAAvB;;;AAEA,eAAeC,mBAAf,CAAmCC,aAAnC,EAAiD;AAAE;AAC/C,QAAMC,OAAO,GAAG,MAAMP,gBAAgB,CAAC,EAAD,EAAK;AACvCQ,IAAAA,IAAI,EAAE,CADiC;AAEvCC,IAAAA,OAAO,EAAE;AAF8B,GAAL,CAAtC;AAIAH,EAAAA,aAAa,CAACC,OAAD,CAAb;AACH;;AAED,eAAeG,mBAAf,CAAmCJ,aAAnC,EAAiD;AAAE;AAC/C,QAAMC,OAAO,GAAG,MAAML,gBAAgB,CAAC,EAAD,EAAK;AACvCS,IAAAA,OAAO,EAAE,6BAD8B;AAEvCH,IAAAA,IAAI,EAAE,CAFiC;AAGvCC,IAAAA,OAAO,EAAE;AAH8B,GAAL,CAAtC;AAKAH,EAAAA,aAAa,CAACC,OAAD,CAAb;AACH,C,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,MAAMK,YAAY,GAAG,MAAM;AAAA;;AACvB,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA;AAAV,MAAuBX,SAAS,EAAtC;AACA,QAAM,CAACY,gBAAD,EAAmBT,aAAnB,IAAoCV,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACoB,SAAD,EAAYC,UAAZ,IAA0BrB,QAAQ,CAAC,KAAD,CAAxC;AACAsB,EAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;AACAhB,EAAAA,eAAe,CAAC,MAAM;AAClBmB,IAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,UAAMG,iBAAiB,GAAG,YAAY;AACtC,YAAMC,IAAI,GAAG,MAAMC,OAAO,CAACC,GAAR,CAAY,CAC3BtB,cAAc,CAAC,EAAD,EAAK;AACfU,QAAAA,OAAO,EAAG,iBAAD,GAAkBE,MAAlB,GAA0B,GADpB;AAEfJ,QAAAA,OAAO,EAAE;AAFM,OAAL,CADa,CAAZ,CAAnB;AAOAS,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBE,IAApB;AACAf,MAAAA,aAAa,CAACe,IAAD,CAAb;AACC,KAVD;;AAWAD,IAAAA,iBAAiB;AACjBH,IAAAA,UAAU,CAAC,KAAD,CAAV;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAfkB,CAgBlB;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACH,GA9Bc,EA8BZ,EA9BY,CAAf;AAgCA,sBACE;AAAA,eACKD,OAAO,CAACC,GAAR,CAAY,QAAZ,CADL,eAEI,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,YAFJ,EAGKH,SAAS,iBAAI,QAAC,UAAD;AAAY,MAAA,IAAI,EAAED,gBAAlB;AAAoC,MAAA,QAAQ,EAAED;AAA9C;AAAA;AAAA;AAAA;AAAA,YAHlB;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAOD,CA5CH;;GAAMF,Y;UAC2BT,S;;;KAD3BS,Y;AA8CJ,eAAeA,YAAf","sourcesContent":["import * as React from 'react';\nimport { useState, useEffect, useLayoutEffect } from \"react\";\nimport Carousel from \"../../components/Common/Carousel\";\nimport { requesScenicSpot, requesActivity, requesRestaurant } from \"../../controller/apiManager\";\nimport { useParams } from \"react-router-dom\";\nimport DetailInfo from \"./common/DetailInfo\"\n\nasync function fetchScenicSpotData(setDetailData){ //載入頁面取後端資料\n    const getdata = await requesScenicSpot('', {\n        $top: 4,\n        $format: 'JSON'\n    });\n    setDetailData(getdata);\n}\n\nasync function fetchRestaurantData(setDetailData){ //載入頁面取後端資料\n    const getdata = await requesRestaurant('', {\n        $filter: \"Picture/PictureUrl1 ne null\",\n        $top: 4,\n        $format: 'JSON'\n    });\n    setDetailData(getdata);\n}\n\n// async function fetchActivityData(setDetailData, id){ //載入頁面取後端資料\n//     console.log('33');\n//     const getdata = await requesActivity('', {\n//         $filter: `ActivityID eq '`+id+`'`,\n//         $format: 'JSON'\n//     });\n//     setDetailData(getdata);\n// }\n\n\nconst SearchDetail = () => {\n    const { itemId, itemType } = useParams();\n    const [searchDetailData, setDetailData] = useState([]);\n    const [isLoading, setLoading] = useState(false);\n    console.log(itemType);\n    useLayoutEffect(() => {\n        setLoading(true);\n        const fetchActivityData = async () => {\n        const data = await Promise.all([\n            requesActivity('', {\n                $filter: `ActivityID eq '`+itemId+`'`,\n                $format: 'JSON'\n            })\n        ]);\n    \n        console.log('data', data);\n        setDetailData(data);\n        };\n        fetchActivityData();\n        setLoading(false);\n        console.log('222');\n        // fetchActivityData(setDetailData, itemId);\n        // console.log('77');\n        // if(itemType == 'ActivityID'){\n        //     console.log('222');\n        //     fetchActivityData(setDetailData, itemId);\n        // }\n\n        // if(itemType === 'ScenicSpotID'){\n        //     fetchScenicSpotData(setDetailData, itemId);\n        // }\n\n        // if(itemType === 'RestaurantID'){\n        //     fetchRestaurantData(setDetailData, itemId);\n        // }\n    }, []);\n\n    return (\n      <div>\n          {console.log('render')}\n          <Carousel/>\n          {isLoading && <DetailInfo data={searchDetailData} itemType={itemType}/>}\n      </div>\n    );\n  };\n  \n  export default SearchDetail;"]},"metadata":{},"sourceType":"module"}