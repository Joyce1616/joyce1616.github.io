{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chienyoushan/Desktop/33/myapp/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/Users/chienyoushan/Desktop/33/myapp/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"/Users/chienyoushan/Desktop/33/myapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import*as React from'react';import{useState,useEffect}from\"react\";// import Carousel from \"../../components/Common/Carousel\";\nimport{requesScenicSpot,requesActivity,requesRestaurant}from\"../../controller/apiManager\";import{useParams,useLocation}from\"react-router-dom\";import DetailInfo from\"./common/DetailInfo\";import Info from\"./common/Info\";import Maps from\"./common/Map\";import Other from\"./common/Other\";import IntroList from'../../components/Common/IntroList';import Img from'./common/Img';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function fetchScenicSpotData(_x,_x2){return _fetchScenicSpotData.apply(this,arguments);}function _fetchScenicSpotData(){_fetchScenicSpotData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(setDetailData,id){var getdata;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return requesScenicSpot('',{$filter:\"ScenicSpotID eq '\"+id+\"'\",$format:'JSON'});case 2:getdata=_context.sent;setDetailData(getdata);case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchScenicSpotData.apply(this,arguments);}function fetchRestaurantData(_x3,_x4){return _fetchRestaurantData.apply(this,arguments);}function _fetchRestaurantData(){_fetchRestaurantData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(setDetailData,id){var getdata;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return requesRestaurant('',{$filter:\"RestaurantID eq '\"+id+\"'\",$format:'JSON'});case 2:getdata=_context2.sent;setDetailData(getdata);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchRestaurantData.apply(this,arguments);}function fetchActivityData(_x5,_x6){return _fetchActivityData.apply(this,arguments);}function _fetchActivityData(){_fetchActivityData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(setDetailData,id){var getdata;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return requesActivity('',{$filter:\"ActivityID eq '\"+id+\"'\",$format:'JSON'});case 2:getdata=_context3.sent;setDetailData(getdata);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _fetchActivityData.apply(this,arguments);}var SearchDetail=function SearchDetail(){var _useParams=useParams(),itemId=_useParams.itemId,itemType=_useParams.itemType;var loc=useLocation();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),searchDetailData=_useState2[0],setDetailData=_useState2[1];useEffect(function(){if(itemType==='ActivityID'){fetchActivityData(setDetailData,itemId);}if(itemType==='ScenicSpotID'){fetchScenicSpotData(setDetailData,itemId);}if(itemType==='RestaurantID'){fetchRestaurantData(setDetailData,itemId);}},[loc]);return/*#__PURE__*/_jsxs(\"div\",{children:[searchDetailData.length>0&&/*#__PURE__*/_jsx(Img,{data:searchDetailData}),searchDetailData.length>0&&/*#__PURE__*/_jsx(Info,{data:searchDetailData,itemType:itemType}),/*#__PURE__*/_jsx(\"div\",{className:\"container px-5\",id:\"infoBlock\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[searchDetailData.length>0&&/*#__PURE__*/_jsx(DetailInfo,{data:searchDetailData,itemType:itemType}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-6 p-2\",children:[/*#__PURE__*/_jsx(Maps,{}),/*#__PURE__*/_jsx(Other,{})]})]})}),/*#__PURE__*/_jsx(IntroList,{title:itemType,type:\"PC\"})]});};export default SearchDetail;","map":{"version":3,"sources":["/Users/chienyoushan/Desktop/33/myapp/src/pages/SearchDetail/index.js"],"names":["React","useState","useEffect","requesScenicSpot","requesActivity","requesRestaurant","useParams","useLocation","DetailInfo","Info","Maps","Other","IntroList","Img","fetchScenicSpotData","setDetailData","id","$filter","$format","getdata","fetchRestaurantData","fetchActivityData","SearchDetail","itemId","itemType","loc","searchDetailData","length"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { useState, useEffect } from \"react\";\n// import Carousel from \"../../components/Common/Carousel\";\nimport { requesScenicSpot, requesActivity, requesRestaurant } from \"../../controller/apiManager\";\nimport { useParams, useLocation } from \"react-router-dom\";\nimport DetailInfo from \"./common/DetailInfo\"\nimport Info from \"./common/Info\";\nimport Maps from \"./common/Map\";\nimport Other from \"./common/Other\";\nimport IntroList from '../../components/Common/IntroList';\nimport Img from './common/Img';\n\nasync function fetchScenicSpotData(setDetailData, id){ //載入頁面取後端資料\n    const getdata = await requesScenicSpot('', {\n        $filter: `ScenicSpotID eq '`+id+`'`,\n        $format: 'JSON'\n    });\n    setDetailData(getdata);\n}\n\nasync function fetchRestaurantData(setDetailData, id){ //載入頁面取後端資料\n    const getdata = await requesRestaurant('', {\n        $filter: `RestaurantID eq '`+id+`'`,\n        $format: 'JSON'\n    });\n    setDetailData(getdata);\n}\n\nasync function fetchActivityData(setDetailData, id){ //載入頁面取後端資料\n    const getdata = await requesActivity('', {\n        $filter: `ActivityID eq '`+id+`'`,\n        $format: 'JSON'\n    });\n    setDetailData(getdata);\n}\n\n\nconst SearchDetail = () => {\n    const { itemId, itemType } = useParams();\n    const loc = useLocation();\n    const [searchDetailData, setDetailData] = useState([]);\n    useEffect(() => {\n        if(itemType === 'ActivityID'){\n            fetchActivityData(setDetailData, itemId);\n        }\n\n        if(itemType === 'ScenicSpotID'){\n            fetchScenicSpotData(setDetailData, itemId);\n        }\n\n        if(itemType === 'RestaurantID'){\n            fetchRestaurantData(setDetailData, itemId);\n        }\n    }, [loc]);\n\n    return (\n      <div>\n          { searchDetailData.length > 0 && (<Img data={searchDetailData} />)}\n          { searchDetailData.length > 0 && (<Info data={searchDetailData} itemType={itemType}/>)}\n          <div className=\"container px-5\" id=\"infoBlock\">\n            <div className=\"row\">\n                { searchDetailData.length > 0 && (<DetailInfo data={searchDetailData} itemType={itemType}/>)}\n                <div className=\"col-6 p-2\">\n                    <Maps/>\n                    <Other/>\n                </div>\n            </div>\n          </div>\n          <IntroList title={itemType} type=\"PC\"/>\n      </div>\n    );\n  };\n  \n  export default SearchDetail;"]},"metadata":{},"sourceType":"module"}